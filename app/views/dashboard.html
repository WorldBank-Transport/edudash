<div class="page-header">
  <h1 class="text-center"><small>{{ title }}</small></h1>
</div>

<div class="container perfomance-gauges">
    <div class="row">
        <div class="col-sm-4 text-center">
            <p class="dial-title">Change since 2012</p>
            <small class="text-muted">Click for details</small><br>
            <img ng-src="images/gauge_{{ schoolType }}_1.png">
        </div>
        <div class="col-sm-4 text-center">
            <p class="dial-title">Pupil-teacher ratio</p>
            <small class="text-muted">Click for details</small><br>
            <img ng-src="images/gauge_{{ schoolType }}_2.png">
        </div>
        <div class="col-sm-4 text-center">
            <p class="dial-title">Avarage pass rate</p>
            <small class="text-muted">Click for details</small><br>
            <img ng-src="images/gauge_{{ schoolType }}_3.png">
        </div>
    </div>
</div>

<div class="container-fluid map-nav">
    <div class="row">
        <div class="col-sm-7">
            <ul class="nav nav-tabs">
                <li role="presentation" ng-class="{active: activeMap==0}"><a ng-click="showLayer(0)">Schools</a></li>
                <li role="presentation" ng-class="{active: activeMap==1}"><a ng-click="showLayer(1)">Best & Worst Perfomance</a></li>
                <li role="presentation" ng-class="{active: activeMap==2}"><a ng-click="showLayer(2)">Best & Worst Improvements</a></li>
                <li role="presentation" ng-class="{active: activeMap==3}"><a ng-click="showLayer(3)">Districts</a></li>
            </ul>
        </div>
        <div class="col-sm-5">
            <ui-select ng-model="selectedSchool" class="search-schools" on-select="setSchool($item, $model)">
                <ui-select-match placeholder="Search school by name or code ..">{{ $select.selected.name }}</ui-select-match>
                <ui-select-choices repeat="school in schoolsChoices" refresh="getSchoolsChoices($select.search)">
                    <div ng-bind-html="school.name | highlight: $select.search"></div>
                    <small class="text-muted">
                        center code: {{school.code}}<br>
                        district: <span ng-bind-html="''+school.district | highlight: $select.search"></span>
                    </small>
                </ui-select-choices>
            </ui-select>
        </div>
    </div>
</div>



<div class="map-widget container-fluid">
    <div class="row map-widget-row">
        <div class="col-md-7 map-container">
            <div id="map"></div>
        </div>
        <div class="col-md-5 map-details">
            <div class="container-fluid">
                <div ng-if="activeMap!=3" >
                    <h3>{{ selectedSchool.name }}</h3>
                    <small class="text-muted">{{ selectedSchool.code }}</small>
                </div>
            </div>
        </div>
    </div>
</div>

<!--This is where the school tables begin-->

<div id="schooltablescontainer">

    <p class="tableheader"><img src="images/happy.png" class="face">Best performing schools</p>
    <p class="tableheader"><img src="images/sad.png" class="face">Worst performing schools</p>

    <div style="clear: both;"></div>
     
    <div class="scroll">
        <table class="schools">
            <tr ng-repeat="school in bestSchools">
                <td class="rank">{{ $index + 1 }}.</td>
                <td class="name"><a href="#">{{ school.name }}</a><p>{{ school.district }} District<br>{{ school.region }} Region</br></p></td>
                <td class="passrategreen">{{ school.pass_2014 }}%</td>
            </tr>
        </table>
    </div>

    <div class="scroll">
        <table class="schools">
            <tr ng-repeat="school in worstSchools">
                <td class="rank">{{ $index + 1 }}.</td>
                <td class="name">{{ school.name }}<p>{{ school.district }} District<br>{{ school.region }} Region</br></p></td>
                <td class="passratered">{{ school.pass_2014 }}%</td>
            </tr>
        </table>
    </div>
     
    <p class="tableheader"><img src="images/happy.png" class="face">Most improved schools</p>
    <p class="tableheader"><img src="images/sad.png" class="face">Least improved schools</p>

    <div style="clear: both;"></div>
    <div class="scroll">
        <table class="schools">
            <tr ng-repeat="school in mostImprovedSchools">
                <td class="rank">{{ $index + 1 }}.</td>
                <td class="name"><a href="#">{{ school.name }}</a><p>{{ school.district }} District<br>{{ school.region }} Region</br></p></td>
                <td class="passrategreen">{{ school.change_13_14 }}%</td>
            </tr>
        </table>
    </div>

    <div class="scroll"> 
        <table class="schools">
            <tr ng-repeat="school in leastImprovedSchools">
                <td class="rank">{{ $index + 1 }}.</td>
                <td class="name">{{ school.name }}<p>{{ school.district }} District<br>{{ school.region }} Region</br></p></td>
                <td class="passratered">{{ school.change_13_14 }}%</td>
            </tr>
        </table>
    </div>
 
 </div>
 
 <div class="clearfix"></div>
 <!--This is where the school tables end-->

